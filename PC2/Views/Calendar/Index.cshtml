@model PC2.Models.EventsModel
@{
    ViewData["Title"] = "Event Calendar";
}

<style>
    .agenda .agenda-date {
        width: 170px;
    }

        .agenda .agenda-date .dayofmonth {
            width: 40px !important;
            font-size: 36px !important;
            line-height: 36px !important;
            float: left;
            text-align: right;
            margin-right: 10px;
        }

        .agenda .agenda-date .shortdate {
            font-size: 0.75em;
        }


    /* Times */
    .agenda .agenda-time {
        width: 140px;
    }


    /* Events */
    .agenda .agenda-events {
    }

        .agenda .agenda-events .agenda-event {
        }

    @@media (max-width: 767px) {
    }
</style>

<h1>@ViewData["Title"]</h1>

@if (TempData["UpdateFailed"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @TempData["UpdateFailed"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
        </button>
    </div>
}

<div class="agenda">
    <div class="table-responsive">
        <table class="table table-condensed table-bordered">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Event</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < Model.CalendarDate.Count; i++)
                {
                    <tr>
                        <td class="agenda-date" class="active" rowspan="@Model.CalendarDate[i].Events.Count">
                            <div class="dayofmonth">@Model.CalendarDate[i].Date.Day</div>
                            <div class="dayofweek">@Model.CalendarDate[i].Date.DayOfWeek</div>
                            <div class="shortdate text-muted">@Model.CalendarDate[i].Date.ToString("MMMM"),&nbsp;@Model.CalendarDate[i].Date.Year</div>
                        </td>
                        @for (int j = 0; j < Model.CalendarDate[i].Events.Count; j++)
                        {
                            @if (j > 0)
                            {
                            <tr>
                                <td class="agenda-time">
                                    @Model.CalendarDate[i].Events[j].StartingTime &nbsp;-&nbsp; @Model.CalendarDate[i].Events[j].EndingTime
                                </td>
                                <td class="agenda-events">
                                    <div class="agenda-event">
                                        @Model.CalendarDate[i].Events[j].EventDescription
                                    </div>
                                </td>
                                <td>
                                    <a asp-action="Edit" asp-route-id="@Model.CalendarDate[i].Events[j].CalendarEventID">Edit Event</a>
                                </td>
                            </tr>
                            }
                            else
                            {
                            <td class="agenda-time">
                                @Model.CalendarDate[i].Events[j].StartingTime &nbsp;-&nbsp; @Model.CalendarDate[i].Events[j].EndingTime
                            </td>
                            <td class="agenda-events">
                                <div class="agenda-event">
                                    @Model.CalendarDate[i].Events[j].EventDescription
                                </div>
                            </td>
                            <td>
                                <a asp-action="Edit" asp-route-id="@Model.CalendarDate[i].Events[j].CalendarEventID">Edit Event</a>
                            </td>
                            }

                        }
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>